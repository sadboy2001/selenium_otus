{"uid":"18e6e9bab724355c","name":"test_money","fullName":"tests.test_selenium#test_money","historyId":"5cb025b8d9453a50a18f972b5b8b3502","time":{"start":1700825616386,"stop":1700825616386,"duration":0},"status":"broken","statusMessage":"AttributeError: 'function' object has no attribute 'session_id'","statusTrace":"request = <SubRequest 'driver' for <Function test_money>>\n\n    @pytest.fixture()\n    def driver(request):\n        base_url = request.config.getoption(\"--base_url\")\n        browser_name = request.config.getoption(\"--browser\")\n        headless = request.config.getoption(\"--headless\")\n        log_level = request.config.getoption(\"--log_level\")\n    \n        logger = logging.getLogger(request.node.name)\n        file_handler = logging.FileHandler(f\"logs/{request.node.name}.log\")\n        file_handler.setFormatter(logging.Formatter('%(levelname)s %(message)s'))\n        logger.addHandler(file_handler)\n        logger.setLevel(level=log_level)\n    \n        logger.info(\"===> Test %s started at %s\" % (request.node.name, datetime.datetime.now()))\n    \n        service = Service()\n    \n        if browser_name == \"chrome\":\n            options = Options()\n            if headless:\n                options.add_argument(\"headless=new\")\n            browser = webdriver.Chrome(service=service, options=options)\n            options = Options()\n            options.headless = headless\n        elif browser_name == \"firefox\":\n            options = FirefoxOptions()\n            browser = webdriver.Firefox(service=service, options=options)\n            options.headless = headless\n        else:\n            raise NotImplemented()\n    \n        allure.attach(\n>           name=driver.session_id,\n            body=json.dumps(driver.capabilities),\n            attachment_type=allure.attachment_type.JSON)\nE       AttributeError: 'function' object has no attribute 'session_id'\n\nbase_url   = 'http:/localhost'\nbrowser    = <selenium.webdriver.chrome.webdriver.WebDriver (session=\"7d1092ad3d58cde8d5b1e645cf9dc613\")>\nbrowser_name = 'chrome'\nfile_handler = <FileHandler /mnt/c/Users/User/PycharmProjects/selenium_otus_11/logs/test_money.log (NOTSET)>\nheadless   = False\nlog_level  = 'INFO'\nlogger     = <Logger test_money (INFO)>\noptions    = <selenium.webdriver.chrome.options.Options object at 0x7f02e2960730>\nrequest    = <SubRequest 'driver' for <Function test_money>>\nservice    = <selenium.webdriver.chrome.service.Service object at 0x7f02e2960640>\n\nconftest.py:64: AttributeError","flaky":false,"newFailed":false,"newBroken":false,"newPassed":false,"retriesCount":0,"retriesStatusChange":false,"beforeStages":[{"name":"driver","time":{"start":1700825616390,"stop":1700825617943,"duration":1553},"status":"broken","statusMessage":"AttributeError: 'function' object has no attribute 'session_id'\n","statusTrace":"  File \"/mnt/c/Users/User/PycharmProjects/selenium_otus_11/.env/lib/python3.10/site-packages/pluggy/_callers.py\", line 77, in _multicall\n    res = hook_impl.function(*args)\n  File \"/mnt/c/Users/User/PycharmProjects/selenium_otus_11/.env/lib/python3.10/site-packages/_pytest/fixtures.py\", line 1123, in pytest_fixture_setup\n    result = call_fixture_func(fixturefunc, request, kwargs)\n  File \"/mnt/c/Users/User/PycharmProjects/selenium_otus_11/.env/lib/python3.10/site-packages/_pytest/fixtures.py\", line 902, in call_fixture_func\n    fixture_result = fixturefunc(**kwargs)\n  File \"/mnt/c/Users/User/PycharmProjects/selenium_otus_11/conftest.py\", line 64, in driver\n    name=driver.session_id,\n","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":true,"stepsCount":0,"attachmentsCount":0,"hasContent":true,"attachmentStep":false}],"testStage":{"status":"broken","statusMessage":"AttributeError: 'function' object has no attribute 'session_id'","statusTrace":"request = <SubRequest 'driver' for <Function test_money>>\n\n    @pytest.fixture()\n    def driver(request):\n        base_url = request.config.getoption(\"--base_url\")\n        browser_name = request.config.getoption(\"--browser\")\n        headless = request.config.getoption(\"--headless\")\n        log_level = request.config.getoption(\"--log_level\")\n    \n        logger = logging.getLogger(request.node.name)\n        file_handler = logging.FileHandler(f\"logs/{request.node.name}.log\")\n        file_handler.setFormatter(logging.Formatter('%(levelname)s %(message)s'))\n        logger.addHandler(file_handler)\n        logger.setLevel(level=log_level)\n    \n        logger.info(\"===> Test %s started at %s\" % (request.node.name, datetime.datetime.now()))\n    \n        service = Service()\n    \n        if browser_name == \"chrome\":\n            options = Options()\n            if headless:\n                options.add_argument(\"headless=new\")\n            browser = webdriver.Chrome(service=service, options=options)\n            options = Options()\n            options.headless = headless\n        elif browser_name == \"firefox\":\n            options = FirefoxOptions()\n            browser = webdriver.Firefox(service=service, options=options)\n            options.headless = headless\n        else:\n            raise NotImplemented()\n    \n        allure.attach(\n>           name=driver.session_id,\n            body=json.dumps(driver.capabilities),\n            attachment_type=allure.attachment_type.JSON)\nE       AttributeError: 'function' object has no attribute 'session_id'\n\nbase_url   = 'http:/localhost'\nbrowser    = <selenium.webdriver.chrome.webdriver.WebDriver (session=\"7d1092ad3d58cde8d5b1e645cf9dc613\")>\nbrowser_name = 'chrome'\nfile_handler = <FileHandler /mnt/c/Users/User/PycharmProjects/selenium_otus_11/logs/test_money.log (NOTSET)>\nheadless   = False\nlog_level  = 'INFO'\nlogger     = <Logger test_money (INFO)>\noptions    = <selenium.webdriver.chrome.options.Options object at 0x7f02e2960730>\nrequest    = <SubRequest 'driver' for <Function test_money>>\nservice    = <selenium.webdriver.chrome.service.Service object at 0x7f02e2960640>\n\nconftest.py:64: AttributeError","steps":[],"attachments":[{"uid":"5d8256e58a898649","name":"log","source":"5d8256e58a898649.txt","type":"text/plain","size":102}],"parameters":[],"shouldDisplayMessage":true,"stepsCount":0,"attachmentsCount":1,"hasContent":true,"attachmentStep":false},"afterStages":[],"labels":[{"name":"parentSuite","value":"tests"},{"name":"suite","value":"test_selenium"},{"name":"host","value":"VDNH-C1"},{"name":"thread","value":"12111-MainThread"},{"name":"framework","value":"pytest"},{"name":"language","value":"cpython3"},{"name":"package","value":"tests.test_selenium"},{"name":"resultFormat","value":"allure2"}],"parameters":[],"links":[],"hidden":true,"retry":true,"extra":{"categories":[],"tags":[]},"source":"18e6e9bab724355c.json","parameterValues":[]}