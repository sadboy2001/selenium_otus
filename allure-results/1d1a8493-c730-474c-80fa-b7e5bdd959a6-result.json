{"name": "test_add_to_cart", "status": "broken", "statusDetails": {"message": "AttributeError: 'function' object has no attribute 'session_id'", "trace": "request = <SubRequest 'driver' for <Function test_add_to_cart>>\n\n    @pytest.fixture()\n    def driver(request):\n        base_url = request.config.getoption(\"--base_url\")\n        browser_name = request.config.getoption(\"--browser\")\n        headless = request.config.getoption(\"--headless\")\n        log_level = request.config.getoption(\"--log_level\")\n    \n        logger = logging.getLogger(request.node.name)\n        file_handler = logging.FileHandler(f\"logs/{request.node.name}.log\")\n        file_handler.setFormatter(logging.Formatter('%(levelname)s %(message)s'))\n        logger.addHandler(file_handler)\n        logger.setLevel(level=log_level)\n    \n        logger.info(\"===> Test %s started at %s\" % (request.node.name, datetime.datetime.now()))\n    \n        service = Service()\n    \n        if browser_name == \"chrome\":\n            options = Options()\n            if headless:\n                options.add_argument(\"headless=new\")\n            browser = webdriver.Chrome(service=service, options=options)\n            options = Options()\n            options.headless = headless\n        elif browser_name == \"firefox\":\n            options = FirefoxOptions()\n            browser = webdriver.Firefox(service=service, options=options)\n            options.headless = headless\n        else:\n            raise NotImplemented()\n    \n        allure.attach(\n>           name=driver.session_id,\n            body=json.dumps(driver.capabilities),\n            attachment_type=allure.attachment_type.JSON)\nE       AttributeError: 'function' object has no attribute 'session_id'\n\nbase_url   = 'http:/localhost'\nbrowser    = <selenium.webdriver.chrome.webdriver.WebDriver (session=\"bb0f546382c1a7170191af3c5ed319b0\")>\nbrowser_name = 'chrome'\nfile_handler = <FileHandler /mnt/c/Users/User/PycharmProjects/selenium_otus_11/logs/test_add_to_cart.log (NOTSET)>\nheadless   = False\nlog_level  = 'INFO'\nlogger     = <Logger test_add_to_cart (INFO)>\noptions    = <selenium.webdriver.chrome.options.Options object at 0x7f02e2ab0e50>\nrequest    = <SubRequest 'driver' for <Function test_add_to_cart>>\nservice    = <selenium.webdriver.chrome.service.Service object at 0x7f02e2ab3040>\n\nconftest.py:64: AttributeError"}, "attachments": [{"name": "log", "source": "1ba156c4-730a-44de-b04f-a2fc3edb5be6-attachment.txt", "type": "text/plain"}], "start": 1700825620548, "stop": 1700825620548, "uuid": "244e6137-d396-4245-a1d2-19e94bf07900", "historyId": "84f78a3c82ff5ba278a47b25f4f01766", "testCaseId": "84f78a3c82ff5ba278a47b25f4f01766", "fullName": "tests.test_selenium#test_add_to_cart", "labels": [{"name": "parentSuite", "value": "tests"}, {"name": "suite", "value": "test_selenium"}, {"name": "host", "value": "VDNH-C1"}, {"name": "thread", "value": "12111-MainThread"}, {"name": "framework", "value": "pytest"}, {"name": "language", "value": "cpython3"}, {"name": "package", "value": "tests.test_selenium"}]}